{{- if eq .chezmoi.os "darwin" -}}
#!/bin/bash
set -e

echo "==> Installing packages via Homebrew..."

# Install Homebrew if not present
if ! command -v brew &> /dev/null; then
    echo "Installing Homebrew..."
    /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
    eval "$(/opt/homebrew/bin/brew shellenv)"
fi

export HOMEBREW_NO_AUTO_UPDATE=1
export HOMEBREW_CASK_OPTS="--no-quarantine"

brew bundle --no-lock --file=/dev/stdin <<EOF
# CLI Tools
brew "eza"
brew "bat"
brew "git"
brew "git-delta"
brew "jq"
brew "yq"
brew "ripgrep"
brew "fd"
brew "fzf"
brew "lazygit"
brew "neovim"
brew "starship"
brew "zoxide"
brew "htop"
brew "gh"
brew "tree"
brew "wget"
brew "curl"

# Development
brew "node"
brew "python"
brew "go"

# Applications
cask "wezterm"
cask "raycast"
cask "1password"
cask "1password-cli"
cask "visual-studio-code"
cask "docker"
cask "hammerspoon"
cask "karabiner-elements"

# Fonts
cask "font-jetbrains-mono-nerd-font"
cask "font-meslo-lg-nerd-font"
EOF

echo "==> Done!"
{{ end -}}
